spring:
  # 1. Virtual Threads ??? (?? ??)
  threads:
    virtual:
      enabled: true

  # 2. Database (PostgreSQL) - Transactional Outbox? ?? ?? ???
  datasource:
    url: jdbc:postgresql://localhost:5432/payment_db
    username: admin
    password: password
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true

  # 3. Redis - ??? ?, Rate Limit, ?? ?? ?? ???
  data:
    redis:
      host: localhost
      port: 6379

  # 4. Kafka - ???(Ledger) ??? ??? ???
  kafka:
    bootstrap-servers: localhost:9092
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.JsonSerializer
      acks: all # ??? ?? ??? ?? ?? ??

# 5. Resilience4j ?? ?? (??? ?? ? ?? ????)
resilience4j:
  circuitbreaker:
    instances:
      cardApproval: # ??? ?? API? ?? ????
        slidingWindowSize: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 10s
        permittedNumberOfCallsInHalfOpenState: 3
  ratelimiter:
    instances:
      merchantLimit: # ???? ?? ?? (?: 1?? 100?)
        limitForPeriod: 100
        limitRefreshPeriod: 1s
        timeoutDuration: 0

# 6. Actuator - ??? ?? ???
management:
  endpoints:
    web:
      exposure:
        include: health, info, prometheus